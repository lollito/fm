<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="common/head :: head"></head>


<body>

  <div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div th:replace="common/sidebar :: sidebar"></div>
    
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
		<div id="page-content-wrapper">
			<nav th:replace="common/navbar :: navbar"></nav>


			<div class="container-fluid">
				<table data-toggle="table" data-url="/api/player/">
				<thead>
					<tr>
						<th data-field="operate" data-formatter="operateFormatter" data-events="operateEvents"></th>
						<th data-field="role">Role</th>
						<th data-field="name">Name</th>
						<th data-field="surname">Surname</th>
						<th data-field="age">Age</th>
						<th data-field="stamina" data-formatter="roundFormatter">Stamina</th>
						<th data-field="playmaking" data-formatter="roundFormatter">Playmaking</th>
						<th data-field="scoring" data-formatter="roundFormatter">Scoring</th>
						<th data-field="winger" data-formatter="roundFormatter">Winger</th>
						<th data-field="goalkeeping" data-formatter="roundFormatter">Goalkeeping</th>
						<th data-field="passing" data-formatter="roundFormatter">Passing</th>
						<th data-field="defending" data-formatter="roundFormatter">Defending</th>
						<th data-field="setPieces" data-formatter="roundFormatter">Set Pieces</th>
						<th data-field="condition" data-formatter="roundFormatter">Condition</th>
					</tr>
				</thead>
			</table>
			</div>
		</div>
		<!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <div th:replace="common/scripts :: scripts"></div>
  <script type="text/javascript">
  
  	function roundFormatter(value, row, index) {
		return Math.round(value);
	}
  	
  	function operateFormatter(value, row, index) {
   	    return [
   	      '<a class="on-sale" href="javascript:void(0)" title="On Sale">',
   	      '<i class="fa fa-exchange-alt" style="color:#8c2457"></i>',
   	      '</a>'
   	    ].join('')
   	  }

   	  window.operateEvents = {
   	    'click .on-sale': function (e, value, row, index) {
   	    	$.ajax({
   	    	    url: '/api/player/' + row.id + '/onSale',
   	    	    type: 'POST',
   	    	    success: function(result) {
   	    	    	toastr.success('Player on Sale', 'Ok!' )
   	    	    },
   	    	    error : function(result){
   	    	    	console.log("error");
   	    	    	toastr.error('Error', 'Error!' )
   	    	    }
   	    	});
   	    }
   	  }
  </script>
</body>

</html>